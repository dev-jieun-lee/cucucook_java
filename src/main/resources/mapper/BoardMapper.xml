<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "com.example.cucucook.mapper.BoardMapper">
  <resultMap id="BoardResultMap" type="Board">
  <result property="memberId" column="member_id"/>
  <result property="boardId" column="board_id"/>
  <result property="boardDivision" column="board_division"/>
  <result property="title" column="title"/>
  <result property="contents" column="contents"/>
  <result property="boardCategoryId" column="board_category_id"/>
  <result property="regDt" column="reg_dt"/>
  <result property="udtDt" column="udt_dt"/>
  <result property="status" column="status"/>
  <result property="viewCount" column="view_count"/>
  <result property="pBoardId" column="p_board_id"/>
  </resultMap>

  <!-- 게시판 목록 조회-->
<select id="getBoardList" resultMap="BoardResultMap">
    SELECT board_id
          ,member_id
          ,board_category_id
          ,board_division
          ,title
          ,contents
          ,status
          ,view_count
          ,p_board_id
          ,udt_dt
    FROM Board
    <where>
        <!-- 조건이 있을 때만 검색 조건을 추가 -->
        <if test="search != '' and search != null">
            AND title LIKE CONCAT('%', #{search}, '%')
        </if>
        <if test="boardCategoryId != '' and boardCategoryId != null">
            AND board_category_id = #{boardCategoryId}
        </if>
    </where>
    <!-- 기본 정렬은 최신 게시물 우선 -->
    ORDER BY board_id DESC
</select>

  



</mapper>